<div class="quiz-container">
  <!-- NOVÃ‰: VÃ½ber kategÃ³rie -->
  <div class="category-selection" *ngIf="!quizStarted">
    <h1>Vyber si kategÃ³riu a Å¡tÃºduj materiÃ¡ly k danej tÃ©me</h1>
    
    <div class="categories-grid">
      <button class="category-btn" (click)="selectCategory('kombinatorika')">
        <span class="category-icon">ğŸ”¢</span>
        <h3>Kombinatorika</h3>
        <p>VariÃ¡cie, permutÃ¡cie, kombinÃ¡cie</p>
      </button>
      
      <button class="category-btn" (click)="selectCategory('pravdepodobnost')">
        <span class="category-icon">ğŸ²</span>
        <h3>PravdepodobnosÅ¥</h3>
        <p>NÃ¡hodnÃ© javy, pravdepodobnostnÃ© vÃ½poÄty</p>
      </button>
      
      <button class="category-btn" (click)="selectCategory('statistika')">
        <span class="category-icon">ğŸ“Š</span>
        <h3>Å tatistika</h3>
        <p>Priemer, mediÃ¡n, modus, rozptyl</p>
      </button>
      
      <button class="category-btn" (click)="selectCategory('postupnosti')">
        <span class="category-icon">ğŸ“ˆ</span>
        <h3>Postupnosti</h3>
        <p>AritmetickÃ© a geometrickÃ© postupnosti</p>
      </button>
    </div>
  </div>

  <!-- ExistujÃºci quiz -->
  <div *ngIf="quizStarted">
    <div class="quiz-header">
      <h1>Matematika - {{getCategoryName()}}</h1>
      <div class="quiz-info">
        <div class="info-item">
          <span class="icon">ğŸ“</span>
          <span>OtÃ¡zka {{currentQuestion + 1}}/{{questions().length}}</span>
        </div>
        <div class="info-item">
          <span class="icon">â±ï¸</span>
          <span>{{timeRemaining}}s</span>
        </div>
        <div class="info-item">
          <span class="icon">ğŸ¯</span>
          <span>{{score}} bodov</span>
        </div>
      </div>
    </div>

    <div class="progress-bar">
      <div class="progress-fill" [style.width.%]="progressPercentage"></div>
    </div>

    <div class="question-card" *ngIf="!quizFinished && questions().length > 0">
      <h2 class="question-text">{{questions()[currentQuestion].question}}</h2>
      
      <div class="answers-grid">
        <button 
          *ngFor="let answer of questions()[currentQuestion].answers; let i = index"
          class="answer-btn"
          [ngClass]="getAnswerClass(i)"
          (click)="selectAnswer(i)"
          [disabled]="showingResult">
          {{answer}}
        </button>
      </div>

      <button class="btn btn-next" (click)="nextQuestion()" [disabled]="selectedAnswer === null">
        {{currentQuestion === questions().length - 1 ? 'DokonÄiÅ¥' : 'Äalej'}}
      </button>
    </div>

    <div class="loading" *ngIf="loading">
      <p>NaÄÃ­tavam otÃ¡zky...</p>
    </div>

    <div class="results-card" *ngIf="quizFinished">
      <div class="results-icon">ğŸ‰</div>
      <h2>Test dokonÄenÃ½!</h2>
      <div class="results-stats">
        <div class="stat">
          <div class="stat-value">{{score}}/{{questions().length * 10}}</div>
          <div class="stat-label">Bodov</div>
        </div>
        <div class="stat">
          <div class="stat-value">{{correctAnswers}}/{{questions().length}}</div>
          <div class="stat-label">SprÃ¡vne</div>
        </div>
        <div class="stat">
          <div class="stat-value">{{percentage}}%</div>
          <div class="stat-label">ÃšspeÅ¡nosÅ¥</div>
        </div>
      </div>
      
      <div class="results-actions">
        <button class="btn btn-primary" (click)="restartQuiz()">SkÃºsiÅ¥ znova</button>
        <button class="btn btn-secondary" routerLink="/materials">Å tudovaÅ¥ materiÃ¡ly</button>
        <button class="btn btn-tertiary" (click)="backToCategories()">VybraÅ¥ inÃº kategÃ³riu</button>
      </div>
    </div>
  </div>
</div>